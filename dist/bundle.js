!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var r=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"domElement",void 0),i(this,"mousePosX",0),i(this,"mousePosY",0),i(this,"initListeners",(function(){n.domElement.addEventListener("mousemove",(function(t){n.mousePosX=t.clientX,n.mousePosY=t.clientY}))})),this.domElement=e,this.initListeners()};function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function t(e,n,i,r,a){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"x",void 0),o(this,"y",void 0),o(this,"height",void 0),o(this,"width",void 0),o(this,"fillColor",void 0),o(this,"path",void 0),o(this,"toDestroy",!1),o(this,"isRotating",!1),o(this,"rotation",0),o(this,"rotationSpeed",3),o(this,"maxRotation",360),o(this,"draw",(function(t){t.save(),t.beginPath();var e=new Path2D;return s.isRotating?(t.translate(s.width/2+s.x,s.height/2+s.y),e.rect(-s.width/2,-s.height/2,s.width,s.height),t.rotate(s.rotate()*Math.PI/180)):e.rect(s.x,s.y,s.width,s.height),t.fillStyle=s.fillColor,t.stroke(e),t.fill(e),t.restore(),e})),o(this,"initRotate",(function(){s.rotation<=s.maxRotation&&(s.isRotating=!0)})),o(this,"rotate",(function(){return s.rotation>=s.maxRotation?(s.isRotating=!1,s.toDestroy=!0,s.maxRotation):s.rotation+=s.rotationSpeed})),this.x=e,this.y=n,this.height=i,this.width=r,this.fillColor=a};function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"items",[]),s(this,"push",(function(t){e.items.push(t)})),s(this,"itemsToRemove",(function(){return e.items.every((function(t){return!0===t.toDestroy}))?e.items:Array()}))};function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"DOMElement",void 0),h(this,"canvasContext",void 0),h(this,"isDrawing",!1),h(this,"currentDrawnRect",void 0),h(this,"rectsToDraw",[]),h(this,"deleteQueue",void 0),h(this,"mouseListener",void 0),h(this,"mouseStartX",0),h(this,"mouseStartY",0),h(this,"draw",(function(){n.canvasContext.clearRect(0,0,n.DOMElement.width,n.DOMElement.height),n.rectsToDraw=n.rectsToDraw.filter((function(t){return n.deleteQueue.itemsToRemove()?n.deleteQueue.itemsToRemove().indexOf(t)<0:1})),n.rectsToDraw.forEach((function(t){t.draw(n.canvasContext)})),n.isDrawing&&n.canvasContext&&n.currentDrawnRect&&(n.currentDrawnRect.height=n.mouseListener.mousePosY-n.mouseStartY,n.currentDrawnRect.width=n.mouseListener.mousePosX-n.mouseStartX,n.currentDrawnRect.path=n.currentDrawnRect.draw(n.canvasContext)),requestAnimationFrame(n.draw)})),h(this,"initListeners",(function(){n.DOMElement.addEventListener("click",(function(){n.isDrawing=!n.isDrawing,n.isDrawing?(n.mouseStartX=n.mouseListener.mousePosX,n.mouseStartY=n.mouseListener.mousePosY,n.currentDrawnRect=new a(n.mouseStartX,n.mouseStartY,0,0,n.getRandomRgbaColor())):(n.rectsToDraw.push(n.currentDrawnRect),n.currentDrawnRect=void 0)})),n.DOMElement.addEventListener("dblclick",(function(){n.checkClickRectPath()}))})),h(this,"checkClickRectPath",(function(){n.rectsToDraw.filter((function(t){return t!=n.currentDrawnRect})).forEach((function(t){n.canvasContext.isPointInPath(t.path,n.mouseListener.mousePosX,n.mouseListener.mousePosY)&&(t.initRotate(),n.deleteQueue.push(t))}))})),this.DOMElement=e,this.canvasContext=this.DOMElement.getContext("2d"),this.deleteQueue=new u,this.mouseListener=new r(this.DOMElement),this.initListeners(),this.draw()}var e,n,i;return e=t,(n=[{key:"getRandomRgbaColor",value:function(){return"rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", 0.9)")}}])&&c(e.prototype,n),i&&c(e,i),t}();window.onload=function(){var t=document.getElementById("mainCanvas");t.width=window.innerWidth,t.height=window.innerHeight,t&&new l(t)}}]);